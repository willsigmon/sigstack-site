{
  "name": "AI Content Generation Pipeline",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "ai-generate",
        "options": { "responseMode": "responseNode" }
      },
      "name": "Content Request",
      "type": "n8n-nodes-base.webhook",
      "position": [250, 300],
      "webhookId": "ai-gen"
    },
    {
      "parameters": {
        "conditions": {
          "options": { "caseSensitive": true, "leftValue": "", "typeValidation": "strict" },
          "conditions": [
            { "leftValue": "={{ $json.body.type }}", "rightValue": "blog", "operator": { "type": "string", "operation": "equals" } }
          ]
        }
      },
      "name": "Is Blog?",
      "type": "n8n-nodes-base.if",
      "position": [450, 200]
    },
    {
      "parameters": {
        "conditions": {
          "options": { "caseSensitive": true, "leftValue": "", "typeValidation": "strict" },
          "conditions": [
            { "leftValue": "={{ $json.body.type }}", "rightValue": "social", "operator": { "type": "string", "operation": "equals" } }
          ]
        }
      },
      "name": "Is Social?",
      "type": "n8n-nodes-base.if",
      "position": [450, 400]
    },
    {
      "parameters": {
        "model": "brain:latest",
        "baseUrl": "http://100.124.63.99:11434",
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "You are an expert content writer for Leavn, a faith-based iOS app. Write engaging, SEO-optimized blog posts. Use markdown formatting. Be warm, encouraging, and accessible."
            },
            {
              "role": "user",
              "content": "={{ 'Write a blog post about: ' + $json.body.topic + '\\n\\nTarget keywords: ' + ($json.body.keywords || 'faith, spiritual growth, bible study') + '\\n\\nTone: ' + ($json.body.tone || 'warm, encouraging, accessible') }}"
            }
          ]
        },
        "options": {
          "temperature": 0.7,
          "maxTokens": 2000
        }
      },
      "name": "Ollama Blog Writer",
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "position": [700, 200],
      "credentials": {
        "ollamaApi": {
          "id": "ollama-gaming-pc",
          "name": "Ollama Gaming PC"
        }
      }
    },
    {
      "parameters": {
        "model": "brain:latest",
        "baseUrl": "http://100.124.63.99:11434",
        "messages": {
          "values": [
            {
              "role": "system",
              "content": "You are a social media expert for Leavn app. Create engaging posts for Twitter/X, Instagram, and LinkedIn. Include hashtags and emojis where appropriate. Be authentic and relatable."
            },
            {
              "role": "user",
              "content": "={{ 'Create social media posts for: ' + $json.body.topic + '\\n\\nPlatforms: ' + ($json.body.platforms || 'twitter, instagram, linkedin').join(', ') }}"
            }
          ]
        },
        "options": {
          "temperature": 0.8,
          "maxTokens": 1000
        }
      },
      "name": "Ollama Social Writer",
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "position": [700, 400],
      "credentials": {
        "ollamaApi": {
          "id": "ollama-gaming-pc",
          "name": "Ollama Gaming PC"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ { success: true, type: $json.body.type, content: $json.message.content } }}"
      },
      "name": "Return Content",
      "type": "n8n-nodes-base.respondToWebhook",
      "position": [950, 300]
    }
  ],
  "connections": {
    "Content Request": { "main": [[{ "node": "Is Blog?", "type": "main", "index": 0 }, { "node": "Is Social?", "type": "main", "index": 0 }]] },
    "Is Blog?": { "main": [[{ "node": "Ollama Blog Writer", "type": "main", "index": 0 }], []] },
    "Is Social?": { "main": [[{ "node": "Ollama Social Writer", "type": "main", "index": 0 }], []] },
    "Ollama Blog Writer": { "main": [[{ "node": "Return Content", "type": "main", "index": 0 }]] },
    "Ollama Social Writer": { "main": [[{ "node": "Return Content", "type": "main", "index": 0 }]] }
  },
  "settings": { "executionOrder": "v1" }
}
